2018-01-11 11:59:02.7336 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск бота 

2018-01-11 11:59:02.7791 | DeeBeeTeeAlphaBot.Program.Main | INFO | Подключение к БД 

2018-01-11 11:59:03.3612 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск пуллинга telegram API 

2018-01-11 12:02:27.6767 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск бота 

2018-01-11 12:02:27.7227 | DeeBeeTeeAlphaBot.Program.Main | INFO | Подключение к БД 

2018-01-11 12:02:28.1920 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск пуллинга telegram API 

2018-01-11 12:03:31.9171 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 60 

2018-01-11 12:04:38.7661 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 120 

2018-01-11 12:05:24.0441 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 12:05:24.0561 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:320 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515661523 message:'/t @Infom 400 @Boris @Infom  @SergeiAf' 

2018-01-11 12:05:24.6107 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /t 

2018-01-11 12:05:24.7177 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Начала парсинга транзакции в строке '@Infom 400 @Boris @Infom  @SergeiAf' 

2018-01-11 12:05:24.7227 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь from 'Infom' 

2018-01-11 12:05:24.7227 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Сумма '400' 

2018-01-11 12:05:24.7227 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Обнаружена мультитранзакция, поиск пользователей в подстроке '@Boris @Infom  @SergeiAf  

2018-01-11 12:05:24.7367 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Boris' 

2018-01-11 12:05:24.7367 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Infom' 

2018-01-11 12:05:24.7367 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'SergeiAf' 

2018-01-11 12:05:24.7367 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | Количество пользователей to в мультитранзакции 3, сам пользователь True 

2018-01-11 12:05:24.7517 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:05:24.7517 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:05:24.8446 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '0' to 'Boris' 

2018-01-11 12:05:24.8526 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:05:24.8526 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:05:24.9421 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:400 to:Boris 

2018-01-11 12:05:24.9421 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Infom' ,400 ,'Boris' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 12:05:25.0491 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:05:25.0491 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:05:25.1396 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 12:05:25.2191 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет -394,00 

2018-01-11 12:05:25.2276 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:05:25.2361 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:05:25.3196 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Boris'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Boris'), 0) as Bal  

2018-01-11 12:05:25.4062 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Boris составляет 299,00 

2018-01-11 12:05:25.4162 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '1' to 'Infom' 

2018-01-11 12:05:25.4247 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:05:25.4247 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:05:25.5144 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:400 to:Infom 

2018-01-11 12:05:25.5234 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Infom' ,400 ,'Infom' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 12:05:25.6200 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:05:25.6285 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:05:25.7104 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 12:05:25.7895 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет -394,00 

2018-01-11 12:05:25.7895 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:05:25.8065 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:05:25.8898 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 12:05:25.9725 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет -394,00 

2018-01-11 12:05:25.9725 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '2' to 'SergeiAf' 

2018-01-11 12:05:25.9725 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'SergeiAf' 

2018-01-11 12:05:25.9865 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'SergeiAf' 

2018-01-11 12:05:26.0674 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:400 to:SergeiAf 

2018-01-11 12:05:26.0674 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Infom' ,400 ,'SergeiAf' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 12:05:26.1610 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:05:26.1610 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:05:26.2462 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 12:05:26.3300 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет 6,00 

2018-01-11 12:05:26.3300 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'SergeiAf' 

2018-01-11 12:05:26.3480 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'SergeiAf' 

2018-01-11 12:05:26.4274 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'SergeiAf'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'SergeiAf'), 0) as Bal  

2018-01-11 12:05:26.5098 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @SergeiAf составляет -756,00 

2018-01-11 12:05:26.5188 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:05:26.5188 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:05:26.6103 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 12:05:26.6943 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет 6,00 

2018-01-11 12:05:26.6943 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:133 to:Boris 

2018-01-11 12:05:26.7118 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:05:26.7118 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:05:26.8026 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Boris'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Boris'), 0) as Bal  

2018-01-11 12:05:26.8831 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Boris составляет 299,00 

2018-01-11 12:05:26.8831 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:133 to:SergeiAf 

2018-01-11 12:05:26.9001 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'SergeiAf' 

2018-01-11 12:05:26.9091 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'SergeiAf' 

2018-01-11 12:05:26.9923 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'SergeiAf'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'SergeiAf'), 0) as Bal  

2018-01-11 12:05:27.0750 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @SergeiAf составляет -756,00 

2018-01-11 12:05:27.0830 | DeeBeeTeeDB.DBAPI.Command_transaction | INFO | Возврат результата команды transaction с сообщением Транзакция 0 успешно добавлена
Транзакция 0 успешно добавлена
Баланс пользователя @Infom составляет 6,00
Баланс пользователя @Boris составляет 299,00
Баланс пользователя @SergeiAf составляет -756,00
 

2018-01-11 12:05:50.6783 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 180 

2018-01-11 12:06:56.4769 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 240 

2018-01-11 12:08:01.3655 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 300 

2018-01-11 12:09:07.8897 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 360 

2018-01-11 12:11:55.2096 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск бота 

2018-01-11 12:11:55.2565 | DeeBeeTeeAlphaBot.Program.Main | INFO | Подключение к БД 

2018-01-11 12:11:55.8405 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск пуллинга telegram API 

2018-01-11 12:12:05.9555 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 12:12:05.9695 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:322 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515661925 message:'/t @Infom 400 @Boris @Infom  @SergeiAf' 

2018-01-11 12:12:06.4344 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /t 

2018-01-11 12:12:06.4344 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Начала парсинга транзакции в строке '@Infom 400 @Boris @Infom  @SergeiAf' 

2018-01-11 12:12:06.4544 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь from 'Infom' 

2018-01-11 12:12:06.4544 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Сумма '400' 

2018-01-11 12:12:06.4713 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Обнаружена мультитранзакция, поиск пользователей в подстроке '@Boris @Infom  @SergeiAf  

2018-01-11 12:12:06.4713 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Boris' 

2018-01-11 12:12:06.4873 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Infom' 

2018-01-11 12:12:06.4873 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'SergeiAf' 

2018-01-11 12:12:06.4983 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | Количество пользователей to в мультитранзакции 3, сам пользователь True 

2018-01-11 12:12:06.4983 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:12:06.4983 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:12:06.5904 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '0' to 'Boris' 

2018-01-11 12:12:06.5904 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:12:06.6074 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:12:06.6864 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:400 to:Boris 

2018-01-11 12:12:06.6864 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Infom' ,400 ,'Boris' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 12:12:06.7896 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:12:06.7954 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:12:06.8786 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 12:12:06.9709 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет 406,00 

2018-01-11 12:12:06.9709 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:12:06.9912 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:12:07.0889 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Boris'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Boris'), 0) as Bal  

2018-01-11 12:12:07.1991 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Boris составляет -101,00 

2018-01-11 12:12:07.2111 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '1' to 'Infom' 

2018-01-11 12:12:07.2211 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:12:07.2211 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:12:07.3117 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:400 to:Infom 

2018-01-11 12:12:07.3117 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Infom' ,400 ,'Infom' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 12:12:07.4209 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:12:07.4209 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:12:07.5219 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 12:12:07.6058 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет 406,00 

2018-01-11 12:12:07.6178 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:12:07.6258 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:12:07.7038 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 12:12:07.7875 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет 406,00 

2018-01-11 12:12:07.7955 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '2' to 'SergeiAf' 

2018-01-11 12:12:07.7955 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'SergeiAf' 

2018-01-11 12:12:07.8165 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'SergeiAf' 

2018-01-11 12:12:07.8991 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:400 to:SergeiAf 

2018-01-11 12:12:07.9081 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Infom' ,400 ,'SergeiAf' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 12:12:08.0060 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:12:08.0150 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:12:08.0951 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 12:12:08.1785 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет 806,00 

2018-01-11 12:12:08.1872 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'SergeiAf' 

2018-01-11 12:12:08.1872 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'SergeiAf' 

2018-01-11 12:12:08.2800 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'SergeiAf'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'SergeiAf'), 0) as Bal  

2018-01-11 12:12:08.3671 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @SergeiAf составляет -1156,00 

2018-01-11 12:12:08.3761 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:12:08.3761 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:12:08.4673 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 12:12:08.5457 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет 806,00 

2018-01-11 12:12:08.5457 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:133 to:Boris 

2018-01-11 12:12:08.5623 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:12:08.5623 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:12:08.6516 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Boris'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Boris'), 0) as Bal  

2018-01-11 12:12:08.7314 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Boris составляет -101,00 

2018-01-11 12:12:08.7314 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:1 to:SergeiAf 

2018-01-11 12:12:08.7484 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'SergeiAf' 

2018-01-11 12:12:08.7484 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'SergeiAf' 

2018-01-11 12:12:08.8386 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'SergeiAf'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'SergeiAf'), 0) as Bal  

2018-01-11 12:12:08.9247 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @SergeiAf составляет -1156,00 

2018-01-11 12:12:08.9247 | DeeBeeTeeDB.DBAPI.Command_transaction | INFO | Возврат результата команды transaction с сообщением Транзакция 0 успешно добавлена
Транзакция 0 успешно добавлена
Баланс пользователя @Infom составляет 806,00
Баланс пользователя @Boris составляет -101,00
Баланс пользователя @SergeiAf составляет -1156,00
 

2018-01-11 12:13:01.8160 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 60 

2018-01-11 12:16:51.5948 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск бота 

2018-01-11 12:16:51.6552 | DeeBeeTeeAlphaBot.Program.Main | INFO | Подключение к БД 

2018-01-11 12:16:52.2051 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск пуллинга telegram API 

2018-01-11 12:16:52.5790 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 12:16:52.5790 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:324 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515662192 message:'/b' 

2018-01-11 12:16:52.9947 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /b 

2018-01-11 12:16:52.9947 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:16:52.9947 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:16:53.0848 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 12:16:53.1638 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет -794,00 

2018-01-11 12:17:06.3043 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 12:17:06.3143 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:326 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515662225 message:'/t @Infom 400 @Boris @Infom  @SergeiAf' 

2018-01-11 12:17:06.3233 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /t 

2018-01-11 12:17:06.3233 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Начала парсинга транзакции в строке '@Infom 400 @Boris @Infom  @SergeiAf' 

2018-01-11 12:17:06.3403 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь from 'Infom' 

2018-01-11 12:17:06.3403 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Сумма '400' 

2018-01-11 12:17:06.3403 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Обнаружена мультитранзакция, поиск пользователей в подстроке '@Boris @Infom  @SergeiAf  

2018-01-11 12:17:06.3563 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Boris' 

2018-01-11 12:17:06.3563 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Infom' 

2018-01-11 12:17:06.3563 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'SergeiAf' 

2018-01-11 12:17:06.3699 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | Количество пользователей to в мультитранзакции 3, сам пользователь True 

2018-01-11 12:17:06.3699 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:17:06.3699 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:17:06.4635 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '0' to 'Boris' 

2018-01-11 12:17:06.4635 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:17:06.4798 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:17:06.5768 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '1' to 'Infom' 

2018-01-11 12:17:06.5768 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:17:06.5928 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:17:06.6855 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '2' to 'SergeiAf' 

2018-01-11 12:17:06.6855 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'SergeiAf' 

2018-01-11 12:17:06.6855 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'SergeiAf' 

2018-01-11 12:17:06.7766 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:17:06.7766 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:17:06.8598 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 12:17:06.9421 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет -794,00 

2018-01-11 12:17:06.9481 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:133 to:Boris 

2018-01-11 12:17:06.9481 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:17:06.9481 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:17:07.0372 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Boris'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Boris'), 0) as Bal  

2018-01-11 12:17:07.1170 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Boris составляет 699,00 

2018-01-11 12:17:07.1250 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:1 to:SergeiAf 

2018-01-11 12:17:07.1351 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'SergeiAf' 

2018-01-11 12:17:07.1351 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'SergeiAf' 

2018-01-11 12:17:07.2217 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'SergeiAf'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'SergeiAf'), 0) as Bal  

2018-01-11 12:17:07.3022 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @SergeiAf составляет -356,00 

2018-01-11 12:17:07.3112 | DeeBeeTeeDB.DBAPI.Command_transaction | INFO | Возврат результата команды transaction с сообщением Транзакция 0 успешно добавлена
Транзакция 0 успешно добавлена
Баланс пользователя @Infom составляет -794,00
Баланс пользователя @Boris составляет 699,00
Баланс пользователя @SergeiAf составляет -356,00
 

2018-01-11 12:17:55.8816 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 60 

2018-01-11 12:19:28.1237 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск бота 

2018-01-11 12:19:28.1730 | DeeBeeTeeAlphaBot.Program.Main | INFO | Подключение к БД 

2018-01-11 12:19:28.7632 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск пуллинга telegram API 

2018-01-11 12:19:40.1926 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 12:19:40.2026 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:328 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515662379 message:'/t @Infom 400 @Boris @Infom  @SergeiAf' 

2018-01-11 12:19:40.6180 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /t 

2018-01-11 12:19:40.6180 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Начала парсинга транзакции в строке '@Infom 400 @Boris @Infom  @SergeiAf' 

2018-01-11 12:19:40.6384 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь from 'Infom' 

2018-01-11 12:19:40.6384 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Сумма '400' 

2018-01-11 12:19:40.6534 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Обнаружена мультитранзакция, поиск пользователей в подстроке '@Boris @Infom  @SergeiAf  

2018-01-11 12:19:40.6534 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Boris' 

2018-01-11 12:19:40.6534 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Infom' 

2018-01-11 12:19:40.6682 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'SergeiAf' 

2018-01-11 12:19:40.6682 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | Количество пользователей to в мультитранзакции 3, сам пользователь True 

2018-01-11 12:19:40.6682 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:19:40.6832 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:19:40.7622 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '0' to 'Boris' 

2018-01-11 12:19:40.7622 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:19:40.7622 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:19:40.8494 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '1' to 'Infom' 

2018-01-11 12:19:40.8574 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:19:40.8574 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:19:40.9499 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '2' to 'SergeiAf' 

2018-01-11 12:19:40.9499 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'SergeiAf' 

2018-01-11 12:19:40.9623 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'SergeiAf' 

2018-01-11 12:19:41.0411 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:19:41.0411 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:19:41.1317 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 12:19:41.2154 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет -794,00 

2018-01-11 12:19:41.2154 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:133 to:Boris 

2018-01-11 12:19:41.2329 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:19:41.2329 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:19:41.3244 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Boris'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Boris'), 0) as Bal  

2018-01-11 12:19:41.4035 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Boris составляет 699,00 

2018-01-11 12:19:41.4035 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:134 to:SergeiAf 

2018-01-11 12:19:41.4209 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'SergeiAf' 

2018-01-11 12:19:41.4209 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'SergeiAf' 

2018-01-11 12:19:41.5110 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'SergeiAf'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'SergeiAf'), 0) as Bal  

2018-01-11 12:19:41.5955 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @SergeiAf составляет -356,00 

2018-01-11 12:19:41.6050 | DeeBeeTeeDB.DBAPI.Command_transaction | INFO | Возврат результата команды transaction с сообщением Транзакция 0 успешно добавлена
Транзакция 0 успешно добавлена
Баланс пользователя @Infom составляет -794,00
Баланс пользователя @Boris составляет 699,00
Баланс пользователя @SergeiAf составляет -356,00
 

2018-01-11 12:19:59.0554 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 12:19:59.0554 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:330 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515662398 message:'/t @Infom 400 @Boris @SergeiAf' 

2018-01-11 12:19:59.0744 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /t 

2018-01-11 12:19:59.0744 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Начала парсинга транзакции в строке '@Infom 400 @Boris @SergeiAf' 

2018-01-11 12:19:59.0944 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь from 'Infom' 

2018-01-11 12:19:59.1046 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Сумма '400' 

2018-01-11 12:19:59.1046 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Обнаружена мультитранзакция, поиск пользователей в подстроке '@Boris @SergeiAf  

2018-01-11 12:19:59.1046 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Boris' 

2018-01-11 12:19:59.1181 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'SergeiAf' 

2018-01-11 12:19:59.1181 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | Количество пользователей to в мультитранзакции 2, сам пользователь False 

2018-01-11 12:19:59.1181 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:19:59.1181 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:19:59.2091 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '0' to 'Boris' 

2018-01-11 12:19:59.2136 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:19:59.2136 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:19:59.2959 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '1' to 'SergeiAf' 

2018-01-11 12:19:59.3061 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'SergeiAf' 

2018-01-11 12:19:59.3061 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'SergeiAf' 

2018-01-11 12:19:59.3930 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 12:19:59.4019 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 12:19:59.4845 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 12:19:59.5678 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет -794,00 

2018-01-11 12:19:59.5768 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:200 to:Boris 

2018-01-11 12:19:59.5768 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:19:59.5928 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:19:59.6769 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Boris'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Boris'), 0) as Bal  

2018-01-11 12:19:59.7602 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Boris составляет 699,00 

2018-01-11 12:19:59.7602 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:200 to:SergeiAf 

2018-01-11 12:19:59.7767 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'SergeiAf' 

2018-01-11 12:19:59.7767 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'SergeiAf' 

2018-01-11 12:19:59.8660 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'SergeiAf'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'SergeiAf'), 0) as Bal  

2018-01-11 12:19:59.9453 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @SergeiAf составляет -356,00 

2018-01-11 12:19:59.9498 | DeeBeeTeeDB.DBAPI.Command_transaction | INFO | Возврат результата команды transaction с сообщением Транзакция 0 успешно добавлена
Транзакция 0 успешно добавлена
Баланс пользователя @Infom составляет -794,00
Баланс пользователя @Boris составляет 699,00
Баланс пользователя @SergeiAf составляет -356,00
 

2018-01-11 12:26:49.9978 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск бота 

2018-01-11 12:26:50.0459 | DeeBeeTeeAlphaBot.Program.Main | INFO | Подключение к БД 

2018-01-11 12:26:50.6403 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск пуллинга telegram API 

2018-01-11 12:27:35.4274 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 12:27:35.4274 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:334 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515662854 message:'/t @Ivan 402 @Boris @Petr' 

2018-01-11 12:27:35.8485 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /t 

2018-01-11 12:27:35.8485 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Начала парсинга транзакции в строке '@Ivan 402 @Boris @Petr' 

2018-01-11 12:27:35.8485 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь from 'Ivan' 

2018-01-11 12:27:35.8655 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Сумма '402' 

2018-01-11 12:27:35.8655 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Обнаружена мультитранзакция, поиск пользователей в подстроке '@Boris @Petr  

2018-01-11 12:27:35.8655 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Boris' 

2018-01-11 12:27:35.8655 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Petr' 

2018-01-11 12:27:35.8821 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | Количество пользователей to в мультитранзакции 2, сам пользователь False 

2018-01-11 12:27:35.8821 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Ivan' 

2018-01-11 12:27:35.8821 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Ivan' 

2018-01-11 12:27:35.9691 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '0' to 'Boris' 

2018-01-11 12:27:35.9734 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:27:35.9734 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:27:36.0603 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '1' to 'Petr' 

2018-01-11 12:27:36.0669 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Petr' 

2018-01-11 12:27:36.0669 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Petr' 

2018-01-11 12:27:36.1509 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Ivan' 

2018-01-11 12:27:36.1509 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Ivan' 

2018-01-11 12:27:36.2420 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Ivan'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Ivan'), 0) as Bal  

2018-01-11 12:27:36.3250 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Ivan составляет 4332,00 

2018-01-11 12:27:36.3340 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Ivan amount:201 to:Boris 

2018-01-11 12:27:36.3340 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Ivan' ,201 ,'Boris' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 12:27:36.4927 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:27:36.4927 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:27:36.5753 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Boris'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Boris'), 0) as Bal  

2018-01-11 12:27:36.6538 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Boris составляет 498,00 

2018-01-11 12:27:36.6538 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Ivan amount:201 to:Petr 

2018-01-11 12:27:36.6658 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Ivan' ,201 ,'Petr' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 12:27:36.7622 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Petr' 

2018-01-11 12:27:36.7702 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Petr' 

2018-01-11 12:27:36.8528 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Petr'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Petr'), 0) as Bal  

2018-01-11 12:27:36.9393 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Petr составляет -5232,00 

2018-01-11 12:27:36.9467 | DeeBeeTeeDB.DBAPI.Command_transaction | INFO | Возврат результата команды transaction с сообщением Транзакция 46 успешно добавлена
Транзакция 47 успешно добавлена
Баланс пользователя @Ivan составляет 4332,00
Баланс пользователя @Boris составляет 498,00
Баланс пользователя @Petr составляет -5232,00
 

2018-01-11 12:27:55.3754 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 60 

2018-01-11 12:28:32.9714 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 12:28:32.9814 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:336 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515662912 message:'/t @Ivan 701 @Boris @Ivan @Petr' 

2018-01-11 12:28:32.9904 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /t 

2018-01-11 12:28:32.9904 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Начала парсинга транзакции в строке '@Ivan 701 @Boris @Ivan @Petr' 

2018-01-11 12:28:33.0134 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь from 'Ivan' 

2018-01-11 12:28:33.0134 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Сумма '701' 

2018-01-11 12:28:33.0252 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Обнаружена мультитранзакция, поиск пользователей в подстроке '@Boris @Ivan @Petr  

2018-01-11 12:28:33.0252 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Boris' 

2018-01-11 12:28:33.0372 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Ivan' 

2018-01-11 12:28:33.0372 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Petr' 

2018-01-11 12:28:33.0372 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | Количество пользователей to в мультитранзакции 3, сам пользователь True 

2018-01-11 12:28:33.0372 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Ivan' 

2018-01-11 12:28:33.0549 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Ivan' 

2018-01-11 12:28:33.1326 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '0' to 'Boris' 

2018-01-11 12:28:33.1326 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:28:33.1496 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:28:33.2322 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '1' to 'Ivan' 

2018-01-11 12:28:33.2412 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Ivan' 

2018-01-11 12:28:33.2412 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Ivan' 

2018-01-11 12:28:33.3592 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '2' to 'Petr' 

2018-01-11 12:28:33.3592 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Petr' 

2018-01-11 12:28:33.3672 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Petr' 

2018-01-11 12:28:33.4459 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Ivan' 

2018-01-11 12:28:33.4459 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Ivan' 

2018-01-11 12:28:33.5375 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Ivan'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Ivan'), 0) as Bal  

2018-01-11 12:28:33.6786 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Ivan составляет 4734,00 

2018-01-11 12:28:33.6786 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Ivan amount:233 to:Boris 

2018-01-11 12:28:33.6786 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Ivan' ,233 ,'Boris' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 12:28:33.7951 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Boris' 

2018-01-11 12:28:33.8032 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Boris' 

2018-01-11 12:28:33.8854 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Boris'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Boris'), 0) as Bal  

2018-01-11 12:28:33.9665 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Boris составляет 265,00 

2018-01-11 12:28:33.9665 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Ivan amount:235 to:Petr 

2018-01-11 12:28:33.9753 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Ivan' ,235 ,'Petr' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 12:28:34.0656 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Petr' 

2018-01-11 12:28:34.0709 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Petr' 

2018-01-11 12:28:34.1486 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Petr'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Petr'), 0) as Bal  

2018-01-11 12:28:34.2312 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Petr составляет -5467,00 

2018-01-11 12:28:34.2402 | DeeBeeTeeDB.DBAPI.Command_transaction | INFO | Возврат результата команды transaction с сообщением Транзакция 48 успешно добавлена
Транзакция 49 успешно добавлена
Баланс пользователя @Ivan составляет 4734,00
Баланс пользователя @Boris составляет 265,00
Баланс пользователя @Petr составляет -5467,00
 

2018-01-11 12:31:19.3491 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск бота 

2018-01-11 12:31:19.3971 | DeeBeeTeeAlphaBot.Program.Main | INFO | Подключение к БД 

2018-01-11 12:31:19.8994 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск пуллинга telegram API 

2018-01-11 12:32:23.9227 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 60 

2018-01-11 12:33:28.3830 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 120 

2018-01-11 12:34:14.5916 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск бота 

2018-01-11 12:34:14.6504 | DeeBeeTeeAlphaBot.Program.Main | INFO | Подключение к БД 

2018-01-11 12:34:15.2277 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск пуллинга telegram API 

2018-01-11 12:35:18.8147 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 60 

2018-01-11 14:26:43.3196 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск бота 

2018-01-11 14:26:43.3766 | DeeBeeTeeAlphaBot.Program.Main | INFO | Подключение к БД 

2018-01-11 14:26:43.9752 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск пуллинга telegram API 

2018-01-11 14:26:44.4539 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:26:44.4539 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:338 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515665180 message:'/d' 

2018-01-11 14:26:44.8903 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /d 

2018-01-11 14:26:44.8903 | DeeBeeTeeDB.DBAPI.Command_details | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 14:26:44.8903 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 14:26:44.9804 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 14:26:45.0775 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | GetUserDetailsSQL: SELECT to_user, SUM(amount) as amount FROM (SELECT [tid], [from_user], [amount], [to_user] FROM [dbo].[transactions] union SELECT [tid], [to_user], [amount]*(-1), [from_user] FROM [dbo].[transactions] ) AS T WHERE from_user = 'Infom' GROUP BY to_user 

2018-01-11 14:26:45.1565 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | Generate dbt from: Infom to: Sergeiaf amount: 11,00  

2018-01-11 14:26:45.1565 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | Generate dbt from: Infom to: TretyakRoman amount: -805,00  

2018-01-11 14:26:45.1565 | DeeBeeTeeDB.DBAPI.Command_details | INFO | Возврат результата команды details с сообщениемДетали пользователя @Infom. Баланс: -794,00
 @Sergeiaf должен 11,00 @Infom
 @Infom должен 805,00 @TretyakRoman
 

2018-01-11 14:27:50.8169 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 60 

2018-01-11 14:28:57.6621 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 120 

2018-01-11 14:29:16.4162 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:29:16.4262 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:340 user_id:52351856 chat_id:52351856 username: name: Svetlana  date: 1515670155 message:'/start' 

2018-01-11 14:29:16.4262 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /start 

2018-01-11 14:29:16.4442 | DeeBeeTeeDB.DBAPI.Command_start | DEBUG | Поиск пользователя '' 

2018-01-11 14:29:47.5866 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:29:47.5866 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:342 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515670186 message:'@Sveta' 

2018-01-11 14:29:47.5866 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды @Sveta 

2018-01-11 14:29:56.7345 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:29:56.7395 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:344 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515670196 message:'@Svetlana' 

2018-01-11 14:29:56.7395 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды @Svetlana 

2018-01-11 14:30:02.3628 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 180 

2018-01-11 14:30:21.2970 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:30:21.2970 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:346 user_id:52351856 chat_id:52351856 username:Svetlana_Shulgina name: Svetlana  date: 1515670219 message:'/start' 

2018-01-11 14:30:21.3190 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /start 

2018-01-11 14:30:21.3290 | DeeBeeTeeDB.DBAPI.Command_start | DEBUG | Поиск пользователя 'Svetlana_Shulgina' 

2018-01-11 14:30:21.3290 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Svetlana_Shulgina' 

2018-01-11 14:30:21.4166 | DeeBeeTeeDB.DBAPI.Command_start | DEBUG | Добавление пользователя 'Svetlana_Shulgina' с лимитом 1000 

2018-01-11 14:30:21.4226 | DeeBeeTeeDB.DBAPI.NewUser | TRACE | NewUserSQLParams: INSERT INTO [dbo].[users] ([user] ,[assign_date],[limit], [user_id]) VALUES ('Svetlana_Shulgina', getdate(), 1000, 52351856) SELECT top 1 uid FROM [dbo].[users] order by assign_date DESC 

2018-01-11 14:30:21.5129 | DeeBeeTeeDB.DBAPI.Command_start | INFO | Возврат результата команды start с сообщением Поздравляю вы подключились к системе DeeBeeTee. Ваш номер 7. Ваш начальный лимит 1000. Удачного использования 

2018-01-11 14:31:06.8273 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 240 

2018-01-11 14:31:44.5666 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:31:44.5666 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:348 user_id:2730927 chat_id:-156558308 username:Infom name: Ruslan Kasimov date: 1515670304 message:'/t @Infom 1343 @Infom @Infom @Sergeiaf @TretyakRoman @Svetlana_Shulgina' 

2018-01-11 14:31:44.5666 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /t 

2018-01-11 14:31:44.5856 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Начала парсинга транзакции в строке '@Infom 1343 @Infom @Infom @Sergeiaf @TretyakRoman @Svetlana_Shulgina' 

2018-01-11 14:31:44.5856 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь from 'Infom' 

2018-01-11 14:31:44.5981 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Сумма '1343' 

2018-01-11 14:31:44.5981 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Обнаружена мультитранзакция, поиск пользователей в подстроке '@Infom @Infom @Sergeiaf @TretyakRoman @Svetlana_Shulgina  

2018-01-11 14:31:44.5981 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Infom' 

2018-01-11 14:31:44.5981 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Infom' 

2018-01-11 14:31:44.6162 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Sergeiaf' 

2018-01-11 14:31:44.6162 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'TretyakRoman' 

2018-01-11 14:31:44.6162 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | add user  'Svetlana_Shulgina' 

2018-01-11 14:31:44.6297 | DeeBeeTeeDB.DBAPI.Command_transaction | TRACE | Количество пользователей to в мультитранзакции 5, сам пользователь True 

2018-01-11 14:31:44.6297 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 14:31:44.6297 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 14:31:44.7165 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '0' to 'Infom' 

2018-01-11 14:31:44.7165 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 14:31:44.7250 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 14:31:44.8043 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '1' to 'Infom' 

2018-01-11 14:31:44.8043 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 14:31:44.8228 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 14:31:44.9050 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '2' to 'Sergeiaf' 

2018-01-11 14:31:44.9050 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Sergeiaf' 

2018-01-11 14:31:44.9140 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Sergeiaf' 

2018-01-11 14:31:44.9922 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '3' to 'TretyakRoman' 

2018-01-11 14:31:44.9922 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'TretyakRoman' 

2018-01-11 14:31:45.0092 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'TretyakRoman' 

2018-01-11 14:31:45.0912 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь номер '4' to 'Svetlana_Shulgina' 

2018-01-11 14:31:45.0992 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Svetlana_Shulgina' 

2018-01-11 14:31:45.0992 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Svetlana_Shulgina' 

2018-01-11 14:31:45.1830 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 14:31:45.1830 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 14:31:45.2657 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 14:31:45.3437 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет -794,00 

2018-01-11 14:31:45.3616 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:268 to:Sergeiaf 

2018-01-11 14:31:45.3706 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Infom' ,268 ,'Sergeiaf' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 14:31:45.4785 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Sergeiaf' 

2018-01-11 14:31:45.4785 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Sergeiaf' 

2018-01-11 14:31:45.5711 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Sergeiaf'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Sergeiaf'), 0) as Bal  

2018-01-11 14:31:45.6504 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Sergeiaf составляет -624,00 

2018-01-11 14:31:45.6504 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:268 to:TretyakRoman 

2018-01-11 14:31:45.6621 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Infom' ,268 ,'TretyakRoman' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 14:31:45.7940 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'TretyakRoman' 

2018-01-11 14:31:45.8030 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'TretyakRoman' 

2018-01-11 14:31:45.8854 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'TretyakRoman'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'TretyakRoman'), 0) as Bal  

2018-01-11 14:31:45.9675 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @TretyakRoman составляет 882,00 

2018-01-11 14:31:45.9726 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:271 to:Svetlana_Shulgina 

2018-01-11 14:31:45.9726 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Infom' ,271 ,'Svetlana_Shulgina' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 14:31:46.0686 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Svetlana_Shulgina' 

2018-01-11 14:31:46.0686 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Svetlana_Shulgina' 

2018-01-11 14:31:46.1613 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Svetlana_Shulgina'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Svetlana_Shulgina'), 0) as Bal  

2018-01-11 14:31:46.2439 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Svetlana_Shulgina составляет -271,00 

2018-01-11 14:31:46.2530 | DeeBeeTeeDB.DBAPI.Command_transaction | INFO | Возврат результата команды transaction с сообщением Обнаружена команда мультитранзакции, будет добавлено несколько транзакция с делением суммы на целые части
Транзакция 50 успешно добавлена
Транзакция 51 успешно добавлена
Транзакция 52 успешно добавлена
Баланс пользователя @Infom составляет -794,00
Баланс пользователя @Sergeiaf составляет -624,00
Баланс пользователя @TretyakRoman составляет 882,00
Баланс пользователя @Svetlana_Shulgina составляет -271,00
 

2018-01-11 14:32:13.5424 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 300 

2018-01-11 14:33:08.6396 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:33:08.6396 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:350 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515670387 message:'/d' 

2018-01-11 14:33:08.6616 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /d 

2018-01-11 14:33:08.6726 | DeeBeeTeeDB.DBAPI.Command_details | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 14:33:08.6726 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 14:33:08.7577 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 14:33:08.8365 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | GetUserDetailsSQL: SELECT to_user, SUM(amount) as amount FROM (SELECT [tid], [from_user], [amount], [to_user] FROM [dbo].[transactions] union SELECT [tid], [to_user], [amount]*(-1), [from_user] FROM [dbo].[transactions] ) AS T WHERE from_user = 'Infom' GROUP BY to_user 

2018-01-11 14:33:08.9162 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | Generate dbt from: Infom to: Sergeiaf amount: 279,00  

2018-01-11 14:33:08.9162 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | Generate dbt from: Infom to: Svetlana_Shulgina amount: 271,00  

2018-01-11 14:33:08.9332 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | Generate dbt from: Infom to: TretyakRoman amount: -537,00  

2018-01-11 14:33:08.9332 | DeeBeeTeeDB.DBAPI.Command_details | INFO | Возврат результата команды details с сообщениемДетали пользователя @Infom. Баланс: 13,00
 @Sergeiaf должен 279,00 @Infom
 @Svetlana_Shulgina должен 271,00 @Infom
 @Infom должен 537,00 @TretyakRoman
 

2018-01-11 14:33:17.7304 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 360 

2018-01-11 14:34:23.2803 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 420 

2018-01-11 14:35:27.8883 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 480 

2018-01-11 14:36:34.7279 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:36:34.7379 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:352 user_id:2730927 chat_id:-156558308 username:Infom name: Ruslan Kasimov date: 1515670594 message:'/t' 

2018-01-11 14:36:34.7379 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /t 

2018-01-11 14:36:34.7540 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Начала парсинга транзакции в строке '' 

2018-01-11 14:36:34.9265 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 540 

2018-01-11 14:37:42.5990 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 600 

2018-01-11 14:37:45.9010 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:37:45.9010 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:354 user_id:2730927 chat_id:-156558308 username:Infom name: Ruslan Kasimov date: 1515670665 message:'/t @Infom 150 @Sergeiaf' 

2018-01-11 14:37:45.9010 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /t 

2018-01-11 14:37:45.9180 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Начала парсинга транзакции в строке '@Infom 150 @Sergeiaf' 

2018-01-11 14:37:45.9180 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь from 'Infom' 

2018-01-11 14:37:45.9180 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Сумма '150' 

2018-01-11 14:37:45.9180 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь to 'Sergeiaf' 

2018-01-11 14:37:45.9370 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 14:37:45.9370 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 14:37:46.0189 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Sergeiaf' 

2018-01-11 14:37:46.0189 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Sergeiaf' 

2018-01-11 14:37:46.1028 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:150 to:Sergeiaf 

2018-01-11 14:37:46.1083 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Infom' ,150 ,'Sergeiaf' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 14:37:46.2258 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 14:37:46.2302 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 14:37:46.3072 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 14:37:46.3857 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет 163,00 

2018-01-11 14:37:46.3857 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Sergeiaf' 

2018-01-11 14:37:46.4048 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Sergeiaf' 

2018-01-11 14:37:46.4871 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Sergeiaf'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Sergeiaf'), 0) as Bal  

2018-01-11 14:37:46.5663 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Sergeiaf составляет -774,00 

2018-01-11 14:37:46.5748 | DeeBeeTeeDB.DBAPI.Command_transaction | INFO | Возврат результата команды transaction с сообщением Транзакция 53 успешно добавлена
Баланс пользователя @Infom составляет 163,00
Баланс пользователя @Sergeiaf составляет -774,00 

2018-01-11 14:38:26.5667 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:38:26.5757 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:356 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515670706 message:'/t @Svetlana_Shulgina 271 @Infom' 

2018-01-11 14:38:26.5867 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /t 

2018-01-11 14:38:26.5867 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Начала парсинга транзакции в строке '@Svetlana_Shulgina 271 @Infom' 

2018-01-11 14:38:26.6047 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь from 'Svetlana_Shulgina' 

2018-01-11 14:38:26.6047 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Сумма '271' 

2018-01-11 14:38:26.6177 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь to 'Infom' 

2018-01-11 14:38:26.6177 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Svetlana_Shulgina' 

2018-01-11 14:38:26.6177 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Svetlana_Shulgina' 

2018-01-11 14:38:26.7052 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 14:38:26.7052 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 14:38:26.7884 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Svetlana_Shulgina amount:271 to:Infom 

2018-01-11 14:38:26.7969 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Svetlana_Shulgina' ,271 ,'Infom' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 14:38:26.8934 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Svetlana_Shulgina' 

2018-01-11 14:38:26.9034 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Svetlana_Shulgina' 

2018-01-11 14:38:26.9872 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Svetlana_Shulgina'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Svetlana_Shulgina'), 0) as Bal  

2018-01-11 14:38:27.0702 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Svetlana_Shulgina составляет 0,00 

2018-01-11 14:38:27.0753 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 14:38:27.0753 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 14:38:27.1612 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 14:38:27.2400 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет -108,00 

2018-01-11 14:38:27.2440 | DeeBeeTeeDB.DBAPI.Command_transaction | INFO | Возврат результата команды transaction с сообщением Транзакция 54 успешно добавлена
Баланс пользователя @Svetlana_Shulgina составляет 0,00
Баланс пользователя @Infom составляет -108,00 

2018-01-11 14:38:46.7446 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 660 

2018-01-11 14:39:55.5602 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 720 

2018-01-11 14:41:04.4686 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 780 

2018-01-11 14:42:15.2712 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 840 

2018-01-11 14:43:19.8113 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 900 

2018-01-11 14:44:24.2974 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 960 

2018-01-11 14:45:10.2590 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:45:10.2590 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:358 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515671109 message:'/cx' 

2018-01-11 14:45:10.8328 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /cx 

2018-01-11 14:45:29.2505 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1020 

2018-01-11 14:45:31.4711 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:45:31.4711 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:360 user_id:2730927 chat_id:2730927 username:Infom name: Ruslan Kasimov date: 1515671130 message:'/d' 

2018-01-11 14:45:31.4811 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /d 

2018-01-11 14:45:31.4811 | DeeBeeTeeDB.DBAPI.Command_details | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 14:45:31.4811 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 14:45:31.5712 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 14:45:31.6538 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | GetUserDetailsSQL: SELECT to_user, SUM(amount) as amount FROM (SELECT [tid], [from_user], [amount], [to_user] FROM [dbo].[transactions] union SELECT [tid], [to_user], [amount]*(-1), [from_user] FROM [dbo].[transactions] ) AS T WHERE from_user = 'Infom' GROUP BY to_user 

2018-01-11 14:45:31.7339 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | Generate dbt from: Infom to: Sergeiaf amount: 429,00  

2018-01-11 14:45:31.7424 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | Generate dbt from: Infom to: Svetlana_Shulgina amount: 0,00  

2018-01-11 14:45:31.7424 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | Generate dbt from: Infom to: TretyakRoman amount: -537,00  

2018-01-11 14:45:31.7589 | DeeBeeTeeDB.DBAPI.Command_details | INFO | Возврат результата команды details с сообщениемДетали пользователя @Infom. Баланс: -108,00
 @Sergeiaf должен 429,00 @Infom
 @Infom должен 537,00 @TretyakRoman
 

2018-01-11 14:46:34.5370 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1080 

2018-01-11 14:47:41.4313 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1140 

2018-01-11 14:48:46.0974 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1200 

2018-01-11 14:49:50.5307 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1260 

2018-01-11 14:50:57.3766 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1320 

2018-01-11 14:52:03.9342 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1380 

2018-01-11 14:53:08.4114 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1440 

2018-01-11 14:53:29.9221 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:53:29.9221 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:362 user_id:288805897 chat_id:-156558308 username:TretyakRoman name: Третьяк Роман date: 1515671609 message:'/t' 

2018-01-11 14:53:30.5204 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /t 

2018-01-11 14:53:30.5204 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Начала парсинга транзакции в строке '' 

2018-01-11 14:53:46.9513 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:53:46.9599 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:364 user_id:288805897 chat_id:-156558308 username:TretyakRoman name: Третьяк Роман date: 1515671626 message:'/d' 

2018-01-11 14:53:46.9599 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /d 

2018-01-11 14:53:46.9735 | DeeBeeTeeDB.DBAPI.Command_details | DEBUG | Поиск пользователя 'TretyakRoman' 

2018-01-11 14:53:46.9735 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'TretyakRoman' 

2018-01-11 14:53:47.0621 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'TretyakRoman'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'TretyakRoman'), 0) as Bal  

2018-01-11 14:53:47.1414 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | GetUserDetailsSQL: SELECT to_user, SUM(amount) as amount FROM (SELECT [tid], [from_user], [amount], [to_user] FROM [dbo].[transactions] union SELECT [tid], [to_user], [amount]*(-1), [from_user] FROM [dbo].[transactions] ) AS T WHERE from_user = 'TretyakRoman' GROUP BY to_user 

2018-01-11 14:53:47.2214 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | Generate dbt from: TretyakRoman to: Infom amount: 537,00  

2018-01-11 14:53:47.2214 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | Generate dbt from: TretyakRoman to: Sergeiaf amount: 345,00  

2018-01-11 14:53:47.2214 | DeeBeeTeeDB.DBAPI.Command_details | INFO | Возврат результата команды details с сообщениемДетали пользователя @TretyakRoman. Баланс: 882,00
 @Infom должен 537,00 @TretyakRoman
 @Sergeiaf должен 345,00 @TretyakRoman
 

2018-01-11 14:54:12.1907 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1500 

2018-01-11 14:55:16.5449 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1560 

2018-01-11 14:56:24.1154 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1620 

2018-01-11 14:57:28.7303 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1680 

2018-01-11 14:58:27.9442 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:58:27.9532 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:366 user_id:288805897 chat_id:-156558308 username:TretyakRoman name: Третьяк Роман date: 1515671907 message:'/t @Infom 40 @TretyakRoman' 

2018-01-11 14:58:28.4211 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /t 

2018-01-11 14:58:28.4211 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Начала парсинга транзакции в строке '@Infom 40 @TretyakRoman' 

2018-01-11 14:58:28.4392 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь from 'Infom' 

2018-01-11 14:58:28.4392 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Сумма '40' 

2018-01-11 14:58:28.4512 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Пользователь to 'TretyakRoman' 

2018-01-11 14:58:28.4512 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 14:58:28.4512 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 14:58:28.5410 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Поиск пользователя 'TretyakRoman' 

2018-01-11 14:58:28.5470 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'TretyakRoman' 

2018-01-11 14:58:28.6250 | DeeBeeTeeDB.DBAPI.Command_transaction | DEBUG | Выполнение в SQL транзакции from:Infom amount:40 to:TretyakRoman 

2018-01-11 14:58:28.6250 | DeeBeeTeeDB.DBAPI.NewTransaction | TRACE | NewTransactionSQLParam: INSERT INTO [dbo].[transactions] ([from_user] ,[amount] ,[to_user] ,[operation_date] ,[oid]) VALUES ('Infom' ,40 ,'TretyakRoman' ,getdate() ,0) SELECT top 1 tid FROM [dbo].[transactions] order by [operation_date] DESC 

2018-01-11 14:58:28.7222 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'Infom' 

2018-01-11 14:58:28.7222 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Infom' 

2018-01-11 14:58:28.8061 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Infom'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Infom'), 0) as Bal  

2018-01-11 14:58:28.8851 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @Infom составляет -68,00 

2018-01-11 14:58:28.8911 | DeeBeeTeeDB.DBAPI.Command_balance | DEBUG | Поиск пользователя 'TretyakRoman' 

2018-01-11 14:58:28.8911 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'TretyakRoman' 

2018-01-11 14:58:28.9776 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'TretyakRoman'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'TretyakRoman'), 0) as Bal  

2018-01-11 14:58:29.0571 | DeeBeeTeeDB.DBAPI.Command_balance | INFO | Возврат результата команды balance с сообщением Баланс пользователя @TretyakRoman составляет 842,00 

2018-01-11 14:58:29.0635 | DeeBeeTeeDB.DBAPI.Command_transaction | INFO | Возврат результата команды transaction с сообщением Транзакция 55 успешно добавлена
Баланс пользователя @Infom составляет -68,00
Баланс пользователя @TretyakRoman составляет 842,00 

2018-01-11 14:58:33.5631 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1740 

2018-01-11 14:58:40.0759 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:58:40.0759 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:368 user_id:288805897 chat_id:-156558308 username:TretyakRoman name: Третьяк Роман date: 1515671919 message:'/d' 

2018-01-11 14:58:40.0759 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /d 

2018-01-11 14:58:40.0919 | DeeBeeTeeDB.DBAPI.Command_details | DEBUG | Поиск пользователя 'TretyakRoman' 

2018-01-11 14:58:40.0919 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'TretyakRoman' 

2018-01-11 14:58:40.1759 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'TretyakRoman'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'TretyakRoman'), 0) as Bal  

2018-01-11 14:58:40.2539 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | GetUserDetailsSQL: SELECT to_user, SUM(amount) as amount FROM (SELECT [tid], [from_user], [amount], [to_user] FROM [dbo].[transactions] union SELECT [tid], [to_user], [amount]*(-1), [from_user] FROM [dbo].[transactions] ) AS T WHERE from_user = 'TretyakRoman' GROUP BY to_user 

2018-01-11 14:58:40.3374 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | Generate dbt from: TretyakRoman to: Infom amount: 497,00  

2018-01-11 14:58:40.3426 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | Generate dbt from: TretyakRoman to: Sergeiaf amount: 345,00  

2018-01-11 14:58:40.3426 | DeeBeeTeeDB.DBAPI.Command_details | INFO | Возврат результата команды details с сообщениемДетали пользователя @TretyakRoman. Баланс: 842,00
 @Infom должен 497,00 @TretyakRoman
 @Sergeiaf должен 345,00 @TretyakRoman
 

2018-01-11 14:58:55.6100 | Telegram.Request.TelegramRequest.GetUpdates | DEBUG | New message event 

2018-01-11 14:58:55.6100 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | DEBUG | New message: message_id:370 user_id:459569 chat_id:-156558308 username:Sergeiaf name: Сергей Федоров date: 1515671935 message:'/d' 

2018-01-11 14:58:55.6290 | DeeBeeTeeAlphaBot.Program.Tr_MessageText | INFO | Получение команды /d 

2018-01-11 14:58:55.6380 | DeeBeeTeeDB.DBAPI.Command_details | DEBUG | Поиск пользователя 'Sergeiaf' 

2018-01-11 14:58:55.6380 | DeeBeeTeeDB.DBAPI.SearchUser | TRACE | UserSearchSQL: SELECT uid, [user], assign_date, limit, user_id from dbo.[users] where [user] = 'Sergeiaf' 

2018-01-11 14:58:55.7277 | DeeBeeTeeDB.DBAPI.GetUserBalance | TRACE | GetUserBalanceSQL: SELECT ISNULL((select SUM(amount) from dbo.[transactions] WHERE [from_user] = 'Sergeiaf'),0) - ISNULL((select SUM(amount) from dbo.[transactions] WHERE [to_user] = 'Sergeiaf'), 0) as Bal  

2018-01-11 14:58:55.8062 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | GetUserDetailsSQL: SELECT to_user, SUM(amount) as amount FROM (SELECT [tid], [from_user], [amount], [to_user] FROM [dbo].[transactions] union SELECT [tid], [to_user], [amount]*(-1), [from_user] FROM [dbo].[transactions] ) AS T WHERE from_user = 'Sergeiaf' GROUP BY to_user 

2018-01-11 14:58:55.8860 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | Generate dbt from: Sergeiaf to: Infom amount: -429,00  

2018-01-11 14:58:55.8860 | DeeBeeTeeDB.DBAPI.GetUserDetails | TRACE | Generate dbt from: Sergeiaf to: TretyakRoman amount: -345,00  

2018-01-11 14:58:55.8860 | DeeBeeTeeDB.DBAPI.Command_details | INFO | Возврат результата команды details с сообщениемДетали пользователя @Sergeiaf. Баланс: -774,00
 @Sergeiaf должен 429,00 @Infom
 @Sergeiaf должен 345,00 @TretyakRoman
 

2018-01-11 14:59:37.8856 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1800 

2018-01-11 15:00:42.2429 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1860 

2018-01-11 15:01:46.8451 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1920 

2018-01-11 15:02:51.1830 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 1980 

2018-01-11 15:03:55.6972 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2040 

2018-01-11 15:05:00.8725 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2100 

2018-01-11 15:06:13.2007 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2160 

2018-01-11 15:07:17.9826 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2220 

2018-01-11 15:08:22.2537 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2280 

2018-01-11 15:09:26.7417 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2340 

2018-01-11 15:10:32.2130 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2400 

2018-01-11 15:11:38.7569 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2460 

2018-01-11 15:12:47.3631 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2520 

2018-01-11 15:13:54.4047 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2580 

2018-01-11 15:15:01.2478 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2640 

2018-01-11 15:16:07.3377 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2700 

2018-01-11 15:17:14.3096 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2760 

2018-01-11 15:18:21.9065 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2820 

2018-01-11 15:19:27.9910 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2880 

2018-01-11 15:20:33.8127 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 2940 

2018-01-11 15:21:41.5187 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3000 

2018-01-11 15:22:45.8529 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3060 

2018-01-11 15:23:50.7730 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3120 

2018-01-11 15:24:55.1131 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3180 

2018-01-11 15:26:00.2062 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3240 

2018-01-11 15:27:05.6513 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3300 

2018-01-11 15:56:10.5703 | Telegram.Request.TelegramRequest.GetUpdates | ERROR | Невозможно разрешить удаленное имя: 'api.telegram.org' 

2018-01-11 15:56:36.3598 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3360 

2018-01-11 15:57:50.0575 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3420 

2018-01-11 15:58:54.5379 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3480 

2018-01-11 16:00:00.0162 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3540 

2018-01-11 16:01:05.2876 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3600 

2018-01-11 16:02:11.5517 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3660 

2018-01-11 16:03:16.5871 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3720 

2018-01-11 16:04:21.7762 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3780 

2018-01-11 16:05:27.5496 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3840 

2018-01-11 16:06:32.3490 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3900 

2018-01-11 16:07:36.9510 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 3960 

2018-01-11 16:08:41.3909 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 4020 

2018-01-11 16:09:47.7919 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 4080 

2018-01-11 16:10:52.3123 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 4140 

2018-01-11 16:11:58.8791 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 4200 

2018-01-11 16:13:06.4999 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 4260 

2018-01-11 16:14:12.7914 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 4320 

2018-01-11 16:15:18.5494 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 4380 

2018-01-11 16:16:24.2528 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 4440 

2018-01-11 16:17:31.0192 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 4500 

2018-01-11 16:18:36.0716 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 4560 

2018-01-11 16:19:42.6897 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 4620 

2018-01-11 16:20:49.0078 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 4680 

2018-01-11 16:21:59.3389 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 4740 

2018-01-11 16:23:07.4210 | Telegram.Request.TelegramRequest.GetUpdates | TRACE | HTTP request number 4800 

2018-01-11 16:24:16.7659 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск бота 

2018-01-11 16:24:16.8119 | DeeBeeTeeAlphaBot.Program.Main | INFO | Подключение к БД 

2018-01-11 16:24:17.3929 | DeeBeeTeeAlphaBot.Program.Main | INFO | Запуск пуллинга telegram API 

